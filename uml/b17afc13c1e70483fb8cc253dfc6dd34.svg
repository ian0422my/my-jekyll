<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="340px" preserveAspectRatio="none" style="width:516px;height:340px;background:#FFFFFF;" version="1.1" viewBox="0 0 516 340" width="516px" zoomAndPan="magnify"><defs><filter height="300%" id="ffhv5203hbckr" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="33" x2="33" y1="41.6094" y2="295.7188"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="266" x2="266" y1="41.6094" y2="295.7188"/><rect fill="#FEFECE" filter="url(#ffhv5203hbckr)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="52" x="5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="38" x="12" y="26.5332">SPOP</text><rect fill="#FEFECE" filter="url(#ffhv5203hbckr)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="52" x="5" y="294.7188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="38" x="12" y="316.252">SPOP</text><rect fill="#FEFECE" filter="url(#ffhv5203hbckr)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="188" x="170" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="174" x="177" y="26.5332">ClientJWKSEndpointServlet</text><rect fill="#FEFECE" filter="url(#ffhv5203hbckr)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="188" x="170" y="294.7188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="174" x="177" y="316.252">ClientJWKSEndpointServlet</text><polygon fill="#A80036" points="254,69.9609,264,73.9609,254,77.9609,258,73.9609" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="33" x2="260" y1="73.9609" y2="73.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="209" x="40" y="69.1045">request for jwks public key(sig, enc)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="266" x2="308" y1="104.3125" y2="104.3125"/><line style="stroke:#A80036;stroke-width:1.0;" x1="308" x2="308" y1="104.3125" y2="117.3125"/><line style="stroke:#A80036;stroke-width:1.0;" x1="267" x2="308" y1="117.3125" y2="117.3125"/><polygon fill="#A80036" points="277,113.3125,267,117.3125,277,121.3125,273,117.3125" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="232" x="273" y="99.4561">extract "sig" public key from private key</text><line style="stroke:#A80036;stroke-width:1.0;" x1="266" x2="308" y1="147.6641" y2="147.6641"/><line style="stroke:#A80036;stroke-width:1.0;" x1="308" x2="308" y1="147.6641" y2="160.6641"/><line style="stroke:#A80036;stroke-width:1.0;" x1="267" x2="308" y1="160.6641" y2="160.6641"/><polygon fill="#A80036" points="277,156.6641,267,160.6641,277,164.6641,273,160.6641" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="236" x="273" y="142.8076">extract "enc" public key from private key</text><line style="stroke:#A80036;stroke-width:1.0;" x1="266" x2="308" y1="191.0156" y2="191.0156"/><line style="stroke:#A80036;stroke-width:1.0;" x1="308" x2="308" y1="191.0156" y2="204.0156"/><line style="stroke:#A80036;stroke-width:1.0;" x1="267" x2="308" y1="204.0156" y2="204.0156"/><polygon fill="#A80036" points="277,200.0156,267,204.0156,277,208.0156,273,204.0156" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="194" x="273" y="186.1592">construct jwks for "enc" and "sig"</text><polygon fill="#A80036" points="44,230.3672,34,234.3672,44,238.3672,40,234.3672" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="38" x2="265" y1="234.3672" y2="234.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="180" x="50" y="229.5107">return jwks public key(sig, enc)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="33" x2="75" y1="264.7188" y2="264.7188"/><line style="stroke:#A80036;stroke-width:1.0;" x1="75" x2="75" y1="264.7188" y2="277.7188"/><line style="stroke:#A80036;stroke-width:1.0;" x1="34" x2="75" y1="277.7188" y2="277.7188"/><polygon fill="#A80036" points="44,273.7188,34,277.7188,44,281.7188,40,277.7188" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="40" y="259.8623">cache jwks for 1 day</text><!--MD5=[b1721baa8fc41649d7b67acd47550c38]
@startuml
SPOP -> ClientJWKSEndpointServlet: request for jwks public key(sig, enc)
ClientJWKSEndpointServlet -> ClientJWKSEndpointServlet: extract "sig" public key from private key
ClientJWKSEndpointServlet -> ClientJWKSEndpointServlet: extract "enc" public key from private key
ClientJWKSEndpointServlet -> ClientJWKSEndpointServlet: construct jwks for "enc" and "sig"
ClientJWKSEndpointServlet -> SPOP: return jwks public key(sig, enc)
SPOP -> SPOP: cache jwks for 1 day
@enduml

PlantUML version 1.2021.10(Mon Aug 30 21:43:48 SGT 2021)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: Cp1252
Language: en
Country: US
--></g></svg>