<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="340px" preserveAspectRatio="none" style="width:898px;height:340px;background:#FFFFFF;" version="1.1" viewBox="0 0 898 340" width="898px" zoomAndPan="magnify"><defs><filter height="300%" id="flod11wpwa1h7" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="33" x2="33" y1="41.6094" y2="295.7188"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="417" x2="417" y1="41.6094" y2="295.7188"/><rect fill="#FEFECE" filter="url(#flod11wpwa1h7)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="52" x="5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="38" x="12" y="26.5332">SPOP</text><rect fill="#FEFECE" filter="url(#flod11wpwa1h7)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="52" x="5" y="294.7188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="38" x="12" y="316.252">SPOP</text><rect fill="#FEFECE" filter="url(#flod11wpwa1h7)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="188" x="321" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="174" x="328" y="26.5332">ClientJWKSEndpointServlet</text><rect fill="#FEFECE" filter="url(#flod11wpwa1h7)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="188" x="321" y="294.7188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="174" x="328" y="316.252">ClientJWKSEndpointServlet</text><polygon fill="#A80036" points="405,69.9609,415,73.9609,405,77.9609,409,73.9609" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="33" x2="411" y1="73.9609" y2="73.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="209" x="40" y="69.1045">request for jwks public key(sig, enc)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="417" x2="459" y1="104.3125" y2="104.3125"/><line style="stroke:#A80036;stroke-width:1.0;" x1="459" x2="459" y1="104.3125" y2="117.3125"/><line style="stroke:#A80036;stroke-width:1.0;" x1="418" x2="459" y1="117.3125" y2="117.3125"/><polygon fill="#A80036" points="428,113.3125,418,117.3125,428,121.3125,424,117.3125" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="455" x="424" y="99.4561">extract "sig"(client-jwks-sig-pub) public key from private key(client-jwks-sig-pri)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="417" x2="459" y1="147.6641" y2="147.6641"/><line style="stroke:#A80036;stroke-width:1.0;" x1="459" x2="459" y1="147.6641" y2="160.6641"/><line style="stroke:#A80036;stroke-width:1.0;" x1="418" x2="459" y1="160.6641" y2="160.6641"/><polygon fill="#A80036" points="428,156.6641,418,160.6641,428,164.6641,424,160.6641" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="467" x="424" y="142.8076">extract "enc"(client-jwks-enc-pub) public key from private key(client-jwks-enc-pri)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="417" x2="459" y1="191.0156" y2="191.0156"/><line style="stroke:#A80036;stroke-width:1.0;" x1="459" x2="459" y1="191.0156" y2="204.0156"/><line style="stroke:#A80036;stroke-width:1.0;" x1="418" x2="459" y1="204.0156" y2="204.0156"/><polygon fill="#A80036" points="428,200.0156,418,204.0156,428,208.0156,424,204.0156" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="354" x="424" y="186.1592">construct jwks for client-jwks-enc-pub and client-jwks-sig-pub</text><polygon fill="#A80036" points="44,230.3672,34,234.3672,44,238.3672,40,234.3672" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="38" x2="416" y1="234.3672" y2="234.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="360" x="50" y="229.5107">return jwks public key(client-jwks-enc-pub, client-jwks-sig-pub)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="33" x2="75" y1="264.7188" y2="264.7188"/><line style="stroke:#A80036;stroke-width:1.0;" x1="75" x2="75" y1="264.7188" y2="277.7188"/><line style="stroke:#A80036;stroke-width:1.0;" x1="34" x2="75" y1="277.7188" y2="277.7188"/><polygon fill="#A80036" points="44,273.7188,34,277.7188,44,281.7188,40,277.7188" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="40" y="259.8623">cache jwks for 1 day</text><!--MD5=[8d9714478a32fd2527e6bf23bd687dfd]
@startuml
SPOP -> ClientJWKSEndpointServlet: request for jwks public key(sig, enc)
ClientJWKSEndpointServlet -> ClientJWKSEndpointServlet: extract "sig"(client-jwks-sig-pub) public key from private key(client-jwks-sig-pri)
ClientJWKSEndpointServlet -> ClientJWKSEndpointServlet: extract "enc"(client-jwks-enc-pub) public key from private key(client-jwks-enc-pri)
ClientJWKSEndpointServlet -> ClientJWKSEndpointServlet: construct jwks for client-jwks-enc-pub and client-jwks-sig-pub
ClientJWKSEndpointServlet -> SPOP: return jwks public key(client-jwks-enc-pub, client-jwks-sig-pub)
SPOP -> SPOP: cache jwks for 1 day
@enduml

PlantUML version 1.2021.10(Mon Aug 30 21:43:48 SGT 2021)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: Cp1252
Language: en
Country: US
--></g></svg>